---
layout: post
title: TEST - WriteUp
author: WildZarek
permalink: /htb/test
excerpt: "Descripci贸n de la m谩quina"
description: "Descripci贸n de la m谩quina"
date: 2022-04-20
header:
  teaser: /assets/images/hackthebox/machines/previse.png
  teaser_home_page: true
  icon: /assets/images/hackthebox.webp
categories: [HackTheBox, Pentesting, Privilege Escalation]
tags: []
---

<img class="machine-info" src="/assets/images/hackthebox/machines/previse.png" />

# TL;DR (Spanish Writeup)

#### Estos writeups son una forma de preservar mis notas y conocimientos adquiridos.
#### Si este documento te ayuda a resolver la m谩quina y quieres agradecermelo,
#### puedes darme Respect en HackTheBox, en el siguiente enlace:

<a href="http://www.hackthebox.eu/badge/image/18979" target="_blank">
  <img src="http://www.hackthebox.eu/badge/image/18979" alt="Hack The Box">
</a>

## Bienvenida

Saludos pentesters, en esta ocasi贸n volvemos a la carga con una m谩quina Linux reci茅n retirada,
de dificultad Hard en la que tocamos muchos conceptos y t茅cnicas. 

## Fecha de Resoluci贸n

<a href="https://www.hackthebox.com/achievement/machine/18979/373">
  <img class="pwned-date" src="/assets/images/hackthebox/machines/previse/pwned_date.png">
</a>

## ndice

1. [Fase de Reconocimiento](#reconocimiento).
  * [Reconocimiento de puertos mediante **TCP SYN Port Scan** de Nmap](#syn-port-scan).
  * [Identificaci贸n de los puertos encontrados](#identificacion-puertos).
  * [Identificaci贸n de los **servicios** y **versiones** de los puertos encontrados](#identificacion-servicios).
  * [Identificaci贸n del servicio HTTP/HTTPS con **http-enum** de Nmap](#http-enum).
  * [Identificaci贸n de tecnolog铆as HTTP/HTTPS con **whatweb**](#whatweb).
2. [Fase de Enumeraci贸n](#enumeracion).
  * [Fuzzing de **directorios**](#fuzzing-directorios).
  * [Fuzzing de **subdominios**](#fuzzing-subdominios).
3. [Fase de Explotaci贸n](#explotacion).
4. [Escalada de Privilegios](#escalada-de-privilegios).

## Fase de Reconocimiento [#](#reconocimiento) {#reconocimiento}

###  [TCP SYN Port Scan](#syn-port-scan) {#syn-port-scan}

Empezamos con el reconocimiento de puertos lanzando un **`TCP SYN Port Scan`**

| Par谩metro  | Descripci贸n |
| :--------- | :---------- |
| -p-        | Escanea el rango completo de puertos (hasta el 65535) |
| -sS        | Realiza un escaneo de tipo SYN port scan              |
| --min-rate | Enviar paquetes no m谩s lentos que 5000 por segundo    |
| --open     | Mostrar s贸lo los puertos que esten abiertos           |
| -vvv       | Triple verbose para ver en consola los resultados     |
| -n         | No efectuar resoluci贸n DNS                            |
| -Pn        | No efectuar descubrimiento de hosts                   |
| -oG        | Guarda el output en un archivo con formato grepeable para usar la funci贸n [extractPorts](https://pastebin.com/tYpwpauW) de [S4vitar](https://s4vitar.github.io/)

```console
p3ntest1ng:~$ nmap -p- -sS --min-rate 5000 --open -vvv -n -Pn 10.10.10.10 -oG allPorts
```

### [Identificaci贸n de Puertos](#identificacion-puertos) {#identificacion-puertos}

Los puertos encontrados son los siguientes (enlace a Wikipedia para mayor informaci贸n):

| Puerto | Descripci贸n |
| :----- | :---------- |
| 22     | **[SSH](https://es.wikipedia.org/wiki/Secure_Shell)** - SSH o Secure Shell |
| 80     | **[HTTP](https://es.wikipedia.org/wiki/Servidor_web)** - Servidor web      |

### [Identificaci贸n de Servicios y Versiones](#identificacion-servicios) {#identificacion-servicios}

Vamos a obtener algo m谩s de informaci贸n sobre los puertos que hemos encontrado:

| Par谩metro | Descripci贸n |
| :-------- | :---------- |
| -p        | Escanea sobre los puertos especificados                |
| -sC       | Muestra todos los scripts relacionados con el servicio |
| -sV       | Determina la versi贸n del servicio                      |
| -oN       | Guarda el output en un archivo con formato normal      |

```console
p3ntest1ng:~$ nmap -sCV -p <ports> 10.10.10.10 -oN targeted
```

### [Identificaci贸n del Servidor HTTP/HTTPS con Nmap](#http-enum) {#http-enum}

Analicemos el puerto **80** con un script de reconocimiento HTTP b谩sico de Nmap:

| Par谩metro | Descripci贸n |
| :-------- | :---------- |
| --script  | Ejecuci贸n de scripts escritos en LUA. Usamos **http-enum** |
| -p        | Escanea sobre el puerto especificado                       |
| -oN       | Guarda el output en un archivo con formato normal          |

```console
p3ntest1ng:~$ nmap --script http-enum -p 80 10.10.10.10 -oN webScan
```

### [Identificaci贸n del Servidor HTTP/HTTPS con whatweb](#whatweb) {#whatweb}

Analicemos las distintas tecnolog铆as que se utilizan en el servidor web con ayuda de **`whatweb`**

```console
p3ntest1ng:~$ whatweb http://machine.htb/
```

## Fase de Enumeraci贸n [#](#enumeracion) {#enumeracion}

### [Fuzzing de Directorios](#fuzzing-directorios) {#fuzzing-directorios}

Vamos a identificar posibles directorios con **`wfuzz`**, primero con un diccionario peque帽o y si no encontramos nada, usaremos uno m谩s grande.

| Par谩metro | Descripci贸n |
| :-------- | :---------- |
| -c        | Muestra el output en formato colorizado |
| -w        | Utiliza el diccionario especificado     |
| --hc 404  | Oculta todos los c贸digos de estado 404  |

```console
p3ntest1ng:~$ wfuzz -c -w /usr/share/wordlists/dirb/common.txt --hc 404 http://hostname.htb/FUZZ 2>/dev/null
```

### [Fuzzing de Subdominios](#fuzzing-subdominios) {#fuzzing-subdominios}

Veamos si existen subdominios:

| Par谩metro | Descripci贸n |
| :-------- | :---------- |
| -c        | Mostrar el output en formato colorizado     |
| -w        | Utiliza el diccionario especificado         |
| --hc 404  | Oculta los c贸digos de estado 404            |
| -H        | Realiza una consulta de tipo header         |
| -u        | Especifica la URL para la consulta          |
| -t        | Nos permite lanzar el comando con N threads |

```console
p3ntest1ng:~$ wfuzz -c -w /usr/share/wordlists/SecLists/Discovery/DNS/subdomains-top1million-110000.txt --hc 404 -H "Host: FUZZ.machine.htb" -u http://machine.htb/ -t 100 2>/dev/null
```

Asignamos un virtualhost a la m谩quina en nuestro archivo **`/etc/hosts`** para mayor comodidad y no tener que estar escribiendo la IP.

```console
p3ntest1ng:~$ echo '10.10.10.10 hostname.local' | sudo tee -a /etc/hosts
```

## Fase de Explotaci贸n [#](#explotacion) {#explotacion}



## Escalada de Privilegios [#](#escalada-de-privilegios) {#escalada-de-privilegios}



### 隆Gracias por leer hasta el final!

Opini贸n de la m谩quina.

#### Nos vemos en un pr贸ximo. 隆Feliz hacking! 