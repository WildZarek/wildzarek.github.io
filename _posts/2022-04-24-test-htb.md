---
layout: post
title: TEST - WriteUp
author: WildZarek
permalink: /htb/test
excerpt: "Descripci贸n de la m谩quina"
description: "Descripci贸n de la m谩quina"
date: 2022-04-20
header:
  teaser: /assets/images/hackthebox/machines/previse.png
  teaser_home_page: true
  icon: /assets/images/hackthebox.webp
categories: [HackTheBox, Pentesting, Privilege Escalation]
tags: []
---

<img class="machine-info" src="/assets/images/hackthebox/machines/previse.png" />

# TL;DR (Spanish Writeup)

**Creada por**: [WildZarek](https://www.hackthebox.eu/profile/18979)

Estos posts los escribo y escribir茅 como una forma de preservar mis notas y conocimientos adquiridos.

## Fecha de Resoluci贸n

<p align="center">
  <a href="https://www.hackthebox.com/achievement/machine/18979/373">
    <img class="pwned-date" src="/assets/images/hackthebox/machines/previse/pwned_date.png">
  </a>
</p>

## ndice

1. [Fase de Reconocimiento](#reconocimiento).
  * [Reconocimiento de puertos mediante **TCP SYN Port Scan** de Nmap](#syn-port-scan).
  * [**Identificaci贸n** de los puertos encontrados](#identificacion-puertos).
  * [Identificaci贸n de los **servicios** y **versiones** de los puertos encontrados](#identificacion-servicios).
  * [Identificaci贸n del servicio HTTP/HTTPS con **http-enum** de Nmap](#http-enum).
  * [Identificaci贸n de tecnolog铆as HTTP/HTTPS con **whatweb**](#whatweb).
2. [Fase de Enumeraci贸n](#enumeracion).
  * [Fuzzing de **directorios**](#fuzzing-directorios).
3. [Fase de Explotaci贸n](#explotacion).
4. [Escalada de Privilegios](#escalada-de-privilegios).

## Fase de Reconocimiento [#](#reconocimiento) {#reconocimiento}
### TCP SYN Port Scan [](#syn-port-scan) {#syn-port-scan}

Empezamos con el reconocimiento de puertos lanzando un **`TCP SYN Port Scan`**

| Par谩metro  | Descripci贸n |
| :--------- | :---------- |
| -p-        | Escanea el rango completo de puertos (hasta el 65535) |
| -sS        | Realiza un escaneo de tipo SYN port scan              |
| --min-rate | Enviar paquetes no m谩s lentos que 5000 por segundo    |
| --open     | Mostrar s贸lo los puertos que esten abiertos           |
| -vvv       | Triple verbose para ver en consola los resultados     |
| -n         | No efectuar resoluci贸n DNS                            |
| -Pn        | No efectuar descubrimiento de hosts                   |
| -oG        | Guarda el output en un archivo con formato grepeable para usar la funci贸n [extractPorts](https://pastebin.com/tYpwpauW) de [S4vitar](https://s4vitar.github.io/)

```console
p3ntest1ng:~$ nmap -p- -sS --min-rate 5000 --open -vvv -n -Pn 10.10.10.10 -oG allPorts
```

![Nmap Scan 1](/assets/images/hackthebox/machines/previse/nmap1.png)

Identificamos los siguientes puertos abiertos: [锔](#identificacion-puertos) {#identificacion-puertos}

| Puerto | Descripci贸n |
| :----- | :---------- |
| 22     | **[SSH](https://es.wikipedia.org/wiki/Secure_Shell)** - SSH o Secure Shell |
| 80     | **[HTTP](https://es.wikipedia.org/wiki/Servidor_web)** - Servidor web |

```console
p3ntest1ng:~$ extractPorts allPorts 
[*] Extracting information...

    [*] IP Address: 10.10.10.10
    [*] Open ports: <ports>

[*] Ports copied to clipboard
```

Identificamos los servicios y versiones que se est谩n ejecutando sobre los puertos que hemos encontrado: [锔](#identificacion-servicios) {#identificacion-servicios}

| Par谩metro | Descripci贸n |
| :-------- | :---------- |
| -p        | Escanea sobre los puertos especificados                |
| -sC       | Muestra todos los scripts relacionados con el servicio |
| -sV       | Determina la versi贸n del servicio                      |
| -oN       | Guarda el output en un archivo con formato normal      |

```console
p3ntest1ng:~$ nmap -sCV -p <ports> 10.10.10.10 -oN targeted
```

Analicemos el puerto **80** con un script de reconocimiento HTTP b谩sico de Nmap: [锔](#http-enum) {#http-enum}

| Par谩metro | Descripci贸n |
| :-------- | :---------- |
| --script  | Ejecuci贸n de scripts escritos en LUA. Usamos **http-enum** |
| -p        | Escanea sobre el puerto especificado |
| -oN       | Guarda el output en un archivo con formato normal |

```console
p3ntest1ng:~$ nmap --script http-enum -p 80 10.10.10.10 -oN webScan
```

Tambi茅n podemos analizar las distintas tecnolog铆as que se utilizan en el servidor web con ayuda de [**whatweb**](#whatweb) {#whatweb}

```console
p3ntest1ng:~$ whatweb http://machine.htb/
```

## Fase de Enumeraci贸n [#](#enumeracion) {#enumeracion}

### Fuzzing de Directorios [](#fuzzing-directorios) {#fuzzing-directorios}

En primer lugar vamos a buscar posibles directorios con **`wfuzz`**, primero con un diccionario peque帽o y si no encontramos nada, usaremos uno m谩s grande.

| Par谩metro | Descripci贸n |
| :-------- | :---------- |
| -c        | Muestra el output en formato colorizado |
| -w        | Utiliza el diccionario especificado |
| --hc 404  | Oculta todos los c贸digos de estado 404 |

```console
p3ntest1ng:~$ wfuzz -c -w /usr/share/wordlists/dirb/common.txt --hc 404 http://hostname.htb/FUZZ 2>/dev/null
```

Veamos si existen subdominios:

| Par谩metro | Descripci贸n |
| :-------- | :---------- |
| -c        | Mostrar el output en formato colorizado |
| -w        | Utiliza el diccionario especificado |
| --hc 404  | Oculta los c贸digos de estado 404 |
| -H        | Realiza una consulta de tipo header |
| -u        | Especifica la URL para la consulta |
| -t        | Nos permite lanzar el comando con N threads |

```console
p3ntest1ng:~$ wfuzz -c -w /usr/share/wordlists/SecLists/Discovery/DNS/subdomains-top1million-110000.txt --hc 404 -H "Host: FUZZ.machine.htb" -u http://machine.htb/ -t 100 2>/dev/null
```

Asignamos un virtualhost a la m谩quina en nuestro archivo **`/etc/hosts`** para mayor comodidad y no tener que estar escribiendo la IP.

```console
p3ntest1ng:~$ echo '10.10.10.10 hostname.local' | sudo tee -a /etc/hosts
```

## Fase de Explotaci贸n [#](#explotacion) {#explotacion}



## Escalada de Privilegios [#](#escalada-de-privilegios) {#escalada-de-privilegios}



### 隆Gracias por leer hasta el final!

Opini贸n de la m谩quina

#### Nos vemos en un pr贸ximo. 隆Feliz hacking! 